# Tools Directory

This directory contains utility tools for the starplate-analysis repository. Each tool is self-contained with its own dependencies, configuration, and documentation.

## Available Tools

### `data_fetch/`

Robust data fetching tool for downloading astronomical time-lapse images from allsky.local server.

**Purpose:** Download astroplate images with retry logic, progress tracking, and comprehensive error handling.

**Key Features:**
- Configurable via YAML
- Exponential backoff and retry logic
- Progress bars with tqdm
- Date range support
- Dry-run mode
- Checksum verification
- Summary statistics

**Quick Start:**
```bash
cd data_fetch
pip install -r requirements.txt
python fetch.py 20251224
```

See [`data_fetch/README.md`](data_fetch/README.md) for detailed documentation.

## Tool Structure

Each tool follows a consistent structure pattern:

```
tools/
└── tool_name/
    ├── README.md          # Comprehensive documentation
    ├── requirements.txt   # Python dependencies
    ├── config.yaml        # Configuration settings
    ├── .gitignore         # Tool-specific ignores
    └── tool_script.py     # Main executable
```

## Development Guidelines

When creating a new tool:

1. **Self-Contained**: Each tool should be independently runnable
2. **Documentation**: Include a comprehensive README.md
3. **Configuration**: Use YAML for configuration with sensible defaults
4. **Dependencies**: Pin versions in requirements.txt
5. **Module Support**: Tools should work as both scripts and importable modules
6. **Error Handling**: Include robust error handling and logging
7. **Progress Tracking**: Use progress bars for long-running operations
8. **Testing**: Include validation and dry-run modes where applicable

## Integration with Analysis Pipeline

Tools in this directory integrate with the analysis pipeline:

```bash
# 1. Fetch data
cd tools/data_fetch
python fetch.py 20251224

# 2. Run analysis
cd ../../analysis_simple
python analyze.py ../data/night_2025-12-24/
```

## Common Data Directory

All tools read from and write to the common `data/` directory at the repository root:

```
data/
└── night_YYYY-MM-DD/
    ├── frames/          # Input images (from data_fetch)
    ├── sky_mask.png     # Generated by analysis tools
    ├── metrics.csv      # Analysis results
    └── events.json      # Detected events
```

## Contributing

New tools should follow the existing patterns. See the main repository README for general contribution guidelines.
